"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.parseTSConfig = exports.readTSConfig = void 0;
const typescript_1 = __importDefault(require("typescript"));
const parseConfigHost = {
    fileExists: typescript_1.default.sys.fileExists,
    readFile: typescript_1.default.sys.readFile,
    readDirectory: typescript_1.default.sys.readDirectory,
    useCaseSensitiveFileNames: true,
};
function readTSConfig(searchPath, configName = 'tsconfig.json') {
    const configFileName = typescript_1.default.findConfigFile(searchPath, typescript_1.default.sys.fileExists, configName);
    if (!configFileName)
        throw new Error(`Undefined "${configName}" file on "${searchPath}"`);
    const { config, error } = typescript_1.default.readConfigFile(configFileName, typescript_1.default.sys.readFile);
    if (error) {
        throw error;
    }
    else if (!config) {
        throw new Error(`It was not generated config from readConfigFile("${configFileName}")`);
    }
    return typescript_1.default.parseJsonConfigFileContent(config, parseConfigHost, searchPath);
}
exports.readTSConfig = readTSConfig;
function parseTSConfig(searchPath, tsconfig) {
    return typescript_1.default.parseJsonConfigFileContent(tsconfig, parseConfigHost, searchPath);
}
exports.parseTSConfig = parseTSConfig;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvQHNzZW4vcmVhZC10c2NvbmZpZy9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSw0REFBNEI7QUFFNUIsTUFBTSxlQUFlLEdBQXVCO0lBQzFDLFVBQVUsRUFBRSxvQkFBRSxDQUFDLEdBQUcsQ0FBQyxVQUFVO0lBQzdCLFFBQVEsRUFBRSxvQkFBRSxDQUFDLEdBQUcsQ0FBQyxRQUFRO0lBQ3pCLGFBQWEsRUFBRSxvQkFBRSxDQUFDLEdBQUcsQ0FBQyxhQUFhO0lBQ25DLHlCQUF5QixFQUFFLElBQUk7Q0FDaEMsQ0FBQztBQUVGLFNBQWdCLFlBQVksQ0FDMUIsVUFBa0IsRUFDbEIsYUFBcUIsZUFBZTtJQUVwQyxNQUFNLGNBQWMsR0FBdUIsb0JBQUUsQ0FBQyxjQUFjLENBQzFELFVBQVUsRUFDVixvQkFBRSxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQ2pCLFVBQVUsQ0FDWCxDQUFDO0lBRUYsSUFBSSxDQUFDLGNBQWM7UUFDakIsTUFBTSxJQUFJLEtBQUssQ0FBQyxjQUFjLFVBQVUsY0FBYyxVQUFVLEdBQUcsQ0FBQyxDQUFDO0lBRXZFLE1BQU0sRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLEdBQUcsb0JBQUUsQ0FBQyxjQUFjLENBQUMsY0FBYyxFQUFFLG9CQUFFLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBRTdFLElBQUksS0FBSyxFQUFFO1FBQ1QsTUFBTSxLQUFLLENBQUM7S0FDYjtTQUFNLElBQUksQ0FBQyxNQUFNLEVBQUU7UUFDbEIsTUFBTSxJQUFJLEtBQUssQ0FDYixvREFBb0QsY0FBYyxJQUFJLENBQ3ZFLENBQUM7S0FDSDtJQUVELE9BQU8sb0JBQUUsQ0FBQywwQkFBMEIsQ0FBQyxNQUFNLEVBQUUsZUFBZSxFQUFFLFVBQVUsQ0FBQyxDQUFDO0FBQzVFLENBQUM7QUF4QkQsb0NBd0JDO0FBRUQsU0FBZ0IsYUFBYSxDQUMzQixVQUFrQixFQUNsQixRQUFnQjtJQUVoQixPQUFPLG9CQUFFLENBQUMsMEJBQTBCLENBQUMsUUFBUSxFQUFFLGVBQWUsRUFBRSxVQUFVLENBQUMsQ0FBQztBQUM5RSxDQUFDO0FBTEQsc0NBS0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHMgZnJvbSAndHlwZXNjcmlwdCc7XG5cbmNvbnN0IHBhcnNlQ29uZmlnSG9zdDogdHMuUGFyc2VDb25maWdIb3N0ID0ge1xuICBmaWxlRXhpc3RzOiB0cy5zeXMuZmlsZUV4aXN0cyxcbiAgcmVhZEZpbGU6IHRzLnN5cy5yZWFkRmlsZSxcbiAgcmVhZERpcmVjdG9yeTogdHMuc3lzLnJlYWREaXJlY3RvcnksXG4gIHVzZUNhc2VTZW5zaXRpdmVGaWxlTmFtZXM6IHRydWUsXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gcmVhZFRTQ29uZmlnKFxuICBzZWFyY2hQYXRoOiBzdHJpbmcsXG4gIGNvbmZpZ05hbWU6IHN0cmluZyA9ICd0c2NvbmZpZy5qc29uJyxcbik6IHRzLlBhcnNlZENvbW1hbmRMaW5lIHtcbiAgY29uc3QgY29uZmlnRmlsZU5hbWU6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRzLmZpbmRDb25maWdGaWxlKFxuICAgIHNlYXJjaFBhdGgsXG4gICAgdHMuc3lzLmZpbGVFeGlzdHMsXG4gICAgY29uZmlnTmFtZSxcbiAgKTtcblxuICBpZiAoIWNvbmZpZ0ZpbGVOYW1lKVxuICAgIHRocm93IG5ldyBFcnJvcihgVW5kZWZpbmVkIFwiJHtjb25maWdOYW1lfVwiIGZpbGUgb24gXCIke3NlYXJjaFBhdGh9XCJgKTtcblxuICBjb25zdCB7IGNvbmZpZywgZXJyb3IgfSA9IHRzLnJlYWRDb25maWdGaWxlKGNvbmZpZ0ZpbGVOYW1lLCB0cy5zeXMucmVhZEZpbGUpO1xuXG4gIGlmIChlcnJvcikge1xuICAgIHRocm93IGVycm9yO1xuICB9IGVsc2UgaWYgKCFjb25maWcpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgSXQgd2FzIG5vdCBnZW5lcmF0ZWQgY29uZmlnIGZyb20gcmVhZENvbmZpZ0ZpbGUoXCIke2NvbmZpZ0ZpbGVOYW1lfVwiKWAsXG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiB0cy5wYXJzZUpzb25Db25maWdGaWxlQ29udGVudChjb25maWcsIHBhcnNlQ29uZmlnSG9zdCwgc2VhcmNoUGF0aCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVRTQ29uZmlnKFxuICBzZWFyY2hQYXRoOiBzdHJpbmcsXG4gIHRzY29uZmlnOiBvYmplY3QsXG4pOiB0cy5QYXJzZWRDb21tYW5kTGluZSB7XG4gIHJldHVybiB0cy5wYXJzZUpzb25Db25maWdGaWxlQ29udGVudCh0c2NvbmZpZywgcGFyc2VDb25maWdIb3N0LCBzZWFyY2hQYXRoKTtcbn1cbiJdfQ==