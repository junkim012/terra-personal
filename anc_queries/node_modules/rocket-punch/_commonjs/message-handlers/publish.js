"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.publishMessageHandler = void 0;
const promised_1 = require("@ssen/promised");
const chalk_1 = __importDefault(require("chalk"));
async function publishMessageHandler(message) {
    switch (message.type) {
        case 'exec':
            console.log(chalk_1.default.bold(message.command));
            console.log('');
            const { stderr, stdout } = await promised_1.exec(message.command, {
                encoding: 'utf8',
            });
            console.log(stdout);
            console.error(chalk_1.default.grey(stderr));
            break;
    }
}
exports.publishMessageHandler = publishMessageHandler;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHVibGlzaC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9yb2NrZXQtcHVuY2gvbWVzc2FnZS1oYW5kbGVycy9wdWJsaXNoLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLDZDQUFzQztBQUN0QyxrREFBMEI7QUFHbkIsS0FBSyxVQUFVLHFCQUFxQixDQUFDLE9BQXdCO0lBQ2xFLFFBQVEsT0FBTyxDQUFDLElBQUksRUFBRTtRQUNwQixLQUFLLE1BQU07WUFDVCxPQUFPLENBQUMsR0FBRyxDQUFDLGVBQUssQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7WUFDekMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUNoQixNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxHQUFHLE1BQU0sZUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUU7Z0JBQ3JELFFBQVEsRUFBRSxNQUFNO2FBQ2pCLENBQUMsQ0FBQztZQUNILE9BQU8sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDcEIsT0FBTyxDQUFDLEtBQUssQ0FBQyxlQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDbEMsTUFBTTtLQUNUO0FBQ0gsQ0FBQztBQVpELHNEQVlDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZXhlYyB9IGZyb20gJ0Bzc2VuL3Byb21pc2VkJztcbmltcG9ydCBjaGFsayBmcm9tICdjaGFsayc7XG5pbXBvcnQgeyBQdWJsaXNoTWVzc2FnZXMgfSBmcm9tICcuLi9wYXJhbXMnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHVibGlzaE1lc3NhZ2VIYW5kbGVyKG1lc3NhZ2U6IFB1Ymxpc2hNZXNzYWdlcykge1xuICBzd2l0Y2ggKG1lc3NhZ2UudHlwZSkge1xuICAgIGNhc2UgJ2V4ZWMnOlxuICAgICAgY29uc29sZS5sb2coY2hhbGsuYm9sZChtZXNzYWdlLmNvbW1hbmQpKTtcbiAgICAgIGNvbnNvbGUubG9nKCcnKTtcbiAgICAgIGNvbnN0IHsgc3RkZXJyLCBzdGRvdXQgfSA9IGF3YWl0IGV4ZWMobWVzc2FnZS5jb21tYW5kLCB7XG4gICAgICAgIGVuY29kaW5nOiAndXRmOCcsXG4gICAgICB9KTtcbiAgICAgIGNvbnNvbGUubG9nKHN0ZG91dCk7XG4gICAgICBjb25zb2xlLmVycm9yKGNoYWxrLmdyZXkoc3RkZXJyKSk7XG4gICAgICBicmVhaztcbiAgfVxufVxuIl19